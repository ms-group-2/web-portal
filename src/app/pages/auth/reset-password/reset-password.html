<div class="min-h-screen bg-white flex justify-center pt-20 relative overflow-hidden">
  <a
    routerLink="/auth/sign-in"
    class="absolute top-8 left-8 flex items-center gap-2 text-gray-600"
  >
    <mat-icon>arrow_back</mat-icon>
    <span class="font-bold uppercase text-sm">უკან</span>
  </a>

  <div class="w-full max-w-lg">
    <div class="text-center mb-10">
      <div class="flex justify-center mb-2">
        <img
          src="/assets/logo/logo-purple.svg"
          alt="Vipo logo"
          class="h-10 w-auto m-3 mt-5"
        />
      </div>
      <p class="text-sm text-gray-500 font-bold uppercase tracking-wide">
        Reset password
      </p>
    </div>

    <div class="bg-white border rounded-2xl p-8 auth-card-shadow">
      <form [formGroup]="form" class="space-y-4">

       
        <div>
          <label class="block text-xs font-black uppercase tracking-wider mb-2">
            Email
          </label>
          <mat-form-field appearance="outline" class="w-full">
            <mat-icon matPrefix>mail</mat-icon>
            <input matInput formControlName="email" />
          </mat-form-field>
        </div>

       
        @if (step() === 'code') {
          <div>
            <label class="block text-xs font-black uppercase tracking-wider mb-2">
              Code
            </label>
            <mat-form-field appearance="outline" class="w-full">
              <input matInput formControlName="code" placeholder="123456" />
              @if (showError('code')) {
                <mat-error>{{ getError('code') }}</mat-error>
              }
            </mat-form-field>

            <div class="flex justify-between items-center mt-2">
              <button
                type="button"
                class="text-xs font-bold uppercase text-primary hover:opacity-80"
                [disabled]="isLoading()"
                (click)="resend()"
              >
                Resend code
              </button>

              <button
                mat-flat-button
                type="button"
                [disabled]="isLoading()"
                (click)="submitCode()"
              >
                Continue
              </button>
            </div>
          </div>
        }

        @if (step() === 'newPassword') {

          <div>
            <label class="block text-xs font-black uppercase tracking-wider mb-2">
              New password
            </label>
            <mat-form-field appearance="outline" class="w-full">
              <mat-icon matPrefix class="text-gray-400 mr-2">lock</mat-icon>

              <input
                matInput
                [type]="showNewPassword() ? 'text' : 'password'"
                formControlName="new_password"
                autocomplete="new-password"
                placeholder="••••••••"
              />

              <button
                mat-icon-button
                matSuffix
                type="button"
                (click)="showNewPassword.set(!showNewPassword())"
                class="text-gray-400 hover:text-primary"
              >
                <mat-icon>
                  {{ showNewPassword() ? 'visibility_off' : 'visibility' }}
                </mat-icon>
              </button>

              @if (showError('new_password')) {
                <mat-error>{{ getError('new_password') }}</mat-error>
              }
            </mat-form-field>
          </div>

          <div>
            <label class="block text-xs font-black uppercase tracking-wider mb-2">
              Confirm password
            </label>
            <mat-form-field appearance="outline" class="w-full">
              <mat-icon matPrefix class="text-gray-400 mr-2">lock</mat-icon>

              <input
                matInput
                [type]="showConfirmPassword() ? 'text' : 'password'"
                formControlName="confirm_password"
                autocomplete="new-password"
                placeholder="••••••••"
              />

              <button
                mat-icon-button
                matSuffix
                type="button"
                (click)="showConfirmPassword.set(!showConfirmPassword())"
                class="text-gray-400 hover:text-primary"
              >
                <mat-icon>
                  {{ showConfirmPassword() ? 'visibility_off' : 'visibility' }}
                </mat-icon>
              </button>

              @if (showError('confirm_password')) {
                <mat-error>{{ getError('confirm_password') }}</mat-error>
              }
            </mat-form-field>
          </div>

          <button
            mat-flat-button
            type="button"
            class="w-full"
            [disabled]="isLoading()"
            (click)="submitNewPassword()"
          >
            Set new password
          </button>
        }

        @if (infoMessage()) {
          <p class="text-xs text-green-600 font-semibold">
            {{ infoMessage() }}
          </p>
        }
      </form>
    </div>
  </div>
</div>